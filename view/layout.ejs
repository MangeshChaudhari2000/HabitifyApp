<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Habitify</title>
    <link rel="stylesheet" href="./css/main.css" />
    <script src="./js/main.js"></script>

    <!-- font awesom layout -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <!-- bootstrap 5.3.3 layout -->

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <!-- jquery script -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"
      integrity="sha512-3gJwYpMe3QewGELv8k/BX9vcqhryRdzRMxVfq6ngyWXwo03GFEzjsUm8Q7RZcHPHksttq7/GFoxjCVUjkjvPdw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>

    <!-- sweet alert script -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

    <%- style %>
  </head>
  <body class="bg-secondary-subtle">
    <%- include('_header') %> <%- body %> <%- include('_footer') %>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>

    <%- script %> 
    <% if (flash.success && flash.success.length>0 ) { %>
      <script>
        Swal.fire({
          position: "top-end",
          icon: "success",
          title: '<%= flash.success %>',
          showConfirmButton: false,
          timer: 1000,
        });
      </script>
  <% } %> 
  
  <% if (flash.error && flash.error.length > 0) { %>
      <script>
        Swal.fire({
          icon: "error",
          title: "Error!",
          text: '<%= flash.error %>',
          timer: 1000,
        });
      </script>
  <% } %>
  
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>

    <script>
      document.addEventListener("DOMContentLoaded", function() {
  var daysOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
  var today = new Date();
  var headerRow = document.getElementById("weekdayHeader");

  if (headerRow) {
    for (var i = 6; i >= 0; i--) {
    var th = document.createElement("th");
    var currentDate = new Date(today);
    currentDate.setDate(currentDate.getDate() - i); // Decrement date for each day to get previous days
    th.textContent = daysOfWeek[currentDate.getDay()] + ' ' + currentDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }); // Day of the week and short date
    headerRow.appendChild(th);
}

  } else {
      console.error("Element with ID 'weekdayHeader' not found.");
  }
});
    </script>
  </body>
</html>
